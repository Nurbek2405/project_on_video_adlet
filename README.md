# telegram_services_project
Телеграм бот для услуг и заказчиков

Техническое задание (ТЗ)

1. Общее описание проекта

Проект представляет собой платформу для поиска и выполнения услуг через Telegram-бот. Заказчики могут создавать заказы, а исполнители — отправлять предложения (offers) на выполнение этих заказов. Администратор управляет системой.

2. Цели проекта

Создать удобную платформу для взаимодействия между заказчиками и исполнителями.
Обеспечить возможность фильтрации исполнителей по категориям и городам.
Реализовать систему отзывов и рейтингов для повышения доверия между участниками.
Предоставить администратору инструменты для управления пользователями и заказами.

3. Основные роли пользователей

Заказчик :
Может создавать заказы.
Может просматривать предложения (offers) от исполнителей.
Может выбирать исполнителя и связываться с ним через личные сообщения.
Может оставлять отзывы после завершения заказа.

Исполнитель :
Может отправлять предложения (offers) на заказы.
Может просматривать открытые заказы.
Может получать уведомления о новых заказах в своей категории и городе.
Может получать отзывы от заказчиков.

Администратор :
Может просматривать всех пользователей системы.
Может управлять ролями пользователей (например, назначать/удалять роли).
Может просматривать все заказы и предложения (offers) .

4. Функциональные требования
4.1. Регистрация и авторизация

Пользователь регистрируется через Telegram-бота.
При регистрации пользователь указывает:
Имя.
Город.
Роль (is_customer, is_executor или обе).
Если пользователь является администратором, его Telegram ID автоматически привязывается к флагу is_admin.

4.2. Создание заказов
Заказчик может создать заказ через команду /create_order.
Для создания заказа необходимо указать:
Описание заказа.
Категорию услуги.
Город.
Предложенную цену (опционально).

4.3. Отправка предложений (offers)
Исполнители видят открытые заказы в своей категории и городе.
Исполнители отправляют предложения (offers) через команду /submit_offer.
Для предложения необходимо указать:
Предложенную цену.
Примерное время выполнения.
Комментарий (опционально).

4.4. Выбор исполнителя
Заказчик может просмотреть все предложения (offers) для своего заказа через команду /view_offers.
Заказчик выбирает предложение через команду /accept_offer <ID>.
После выбора бот предоставляет ссылку для связи с исполнителем.

4.5. Система отзывов
После завершения заказа заказчик может оставить отзыв на исполнителя через команду /add_review.
Отзыв включает:
Оценку (от 1 до 5).
Комментарий (опционально).
Исполнители могут просматривать свои отзывы через команду /view_reviews.

4.6. Управление администратором
Администратор может просматривать всех пользователей через команду /admin_view_users.
Администратор может просматривать все заказы через команду /admin_view_orders.
Администратор может изменять роли пользователей через команду /set_role.

5. Требования к базе данных
5.1. Таблицы

users :
Хранит информацию о пользователях.
Поля: id, telegram_id, name, username, is_customer, is_executor, is_admin, city, rating, completed_orders.

categories :
Хранит список категорий услуг.
Поля: id, name.

executor_categories :
Связывает исполнителей с категориями.
Поля: id, executor_id, category_id.

orders :
Хранит информацию о заказах.
Поля: id, customer_id, category_id, description, price, city, created_at, status.

offers :
Хранит предложения (offers) исполнителей на заказы.
Поля: id, order_id, executor_id, proposed_price, estimated_time, status.

reviews :
Хранит отзывы на пользователей.
Поля: id, order_id, author_id, target_id, rating, comment, created_at.

5.2. Связи

users.id → orders.customer_id.
users.id → offers.executor_id.
users.id → executor_categories.executor_id.
categories.id → orders.category_id.
categories.id → executor_categories.category_id.
orders.id → offers.order_id.
orders.id → reviews.order_id.
users.id → reviews.author_id.
users.id → reviews.target_id.

6. Технические требования
6.1. Backend
Использовать FastAPI для создания REST API.
Использовать Uvicorn как сервер для запуска FastAPI.
Использовать SQLAlchemy для работы с базой данных.
База данных: PostgreSQL .

6.2. Telegram-бот
Использовать библиотеку python-telegram-bot для реализации бота.
Бот должен работать асинхронно.

6.3. Frontend
Интерфейс полностью реализован через Telegram-бота.
Все взаимодействия происходят через команды и кнопки в Telegram.

7. Этапы разработки

Этап 1: Подготовка
Настроить базу данных PostgreSQL.
Создать структуру таблиц.
Настроить FastAPI и Telegram-бот.

Этап 2: Регистрация и роли
Реализовать регистрацию пользователей.
Добавить флаги ролей (is_customer, is_executor, is_admin).

Этап 3: Заказы и предложения (offers)
Реализовать создание заказов.
Реализовать отправку предложений (offers) .
Реализовать выбор исполнителя.

Этап 4: Система отзывов
Реализовать добавление отзывов.
Реализовать просмотр отзывов.

Этап 5: Администрирование
Реализовать команды для администратора.

Этап 6: Тестирование
Протестировать все функции.
Устранить ошибки.

Этап 7: Развертывание
Развернуть приложение на сервере.
Настроить автоматический запуск бота и FastAPI.

8. Дополнительные требования

Безопасность :
Защитить доступ к командам администратора.
Убедиться, что только зарегистрированные пользователи могут создавать заказы и отправлять предложения (offers) .
Масштабируемость :
Убедиться, что система может работать с большим количеством пользователей и заказов.
Логирование :
Добавить логирование для отслеживания ошибок и действий пользователей.
